{"ast":null,"code":"var _jsxFileName = \"I:\\\\react_exam\\\\src\\\\Game.js\";\nimport React from 'react';\nimport Field from './components/Field';\nimport GameLog from './components/GameLog';\nimport placeShip from './utils/placeShip';\nimport standardShipsSet from './utils/standardShipsSet';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // playerField: [],\n      // playerShips: [],\n      // arePlayerShipsInvisible: true,\n      enemyField: [],\n      enemyShips: [...standardShipsSet],\n      areEnemyShipsInvisible: true,\n      gameOver: false,\n      logs: ['Ожидание хода...']\n    };\n    for (let i = 0; i < 10; i++) {\n      this.state.enemyField.push([]);\n    }\n    for (let i = 0; i < 10; i++) {\n      for (let j = 0; j < 10; j++) {\n        this.state.enemyField[i].push({\n          x: j,\n          y: i,\n          containsShip: false,\n          shot: false,\n          isShipVisible: false,\n          shipId: null\n        });\n      }\n    }\n    this.state.enemyShips.forEach(ship => {\n      placeShip(this.state.enemyField, ship);\n    });\n  }\n  handleClick(y, x) {\n    if (this.state.enemyField[y][x].shot) {\n      return;\n    }\n    if (this.state.gameOver) {\n      return;\n    }\n    this.setState(state => {\n      const newField = [...state.enemyField];\n      newField[y][x].shot = true;\n      newField[y][x].isShipVisible = true;\n      const newShips = [...state.enemyShips];\n      const newLogs = [...state.logs];\n      let gameOver = false;\n      if (newField[y][x].containsShip) {\n        const hittedShip = newShips.find(ship => ship.id === newField[y][x].shipId);\n        hittedShip.hitpoints--;\n        if (hittedShip.hitpoints > 0) {\n          newLogs.push('Попадание!');\n        } else {\n          newLogs.push('Корабль уничтожен!');\n        }\n        if (newShips.every(ship => ship.hitpoints === 0)) {\n          newLogs.push('Игра окончена.');\n          gameOver = true;\n        }\n      } else {\n        newLogs.push('Мимо!');\n      }\n      return {\n        enemyField: newField,\n        enemyShips: newShips,\n        gameOver: gameOver,\n        logs: newLogs\n      };\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game\",\n      children: [/*#__PURE__*/_jsxDEV(Field, {\n        whose: \"enemy\",\n        fieldMap: this.state.enemyField,\n        onClick: (y, x) => this.handleClick(y, x)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(GameLog, {\n        logs: this.state.logs\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Game;","map":{"version":3,"names":["React","Field","GameLog","placeShip","standardShipsSet","jsxDEV","_jsxDEV","Game","Component","constructor","props","state","enemyField","enemyShips","areEnemyShipsInvisible","gameOver","logs","i","push","j","x","y","containsShip","shot","isShipVisible","shipId","forEach","ship","handleClick","setState","newField","newShips","newLogs","hittedShip","find","id","hitpoints","every","render","className","children","whose","fieldMap","onClick","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["I:/react_exam/src/Game.js"],"sourcesContent":["import React from 'react';\nimport Field from './components/Field';\nimport GameLog from './components/GameLog';\nimport placeShip from './utils/placeShip';\nimport standardShipsSet from './utils/standardShipsSet';\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // playerField: [],\n      // playerShips: [],\n      // arePlayerShipsInvisible: true,\n      enemyField: [],\n      enemyShips: [...standardShipsSet],\n      areEnemyShipsInvisible: true,\n      gameOver: false,\n      logs: ['Ожидание хода...'],\n    };\n    for (let i = 0; i < 10; i++) {\n      this.state.enemyField.push([]);\n    }\n    for (let i = 0; i < 10; i++) {\n      for (let j = 0; j < 10; j++) {\n        this.state.enemyField[i].push({\n          x: j,\n          y: i,\n          containsShip: false,\n          shot: false,\n          isShipVisible: false,\n          shipId: null,\n        });\n      }\n    }\n    this.state.enemyShips.forEach(ship => {\n      placeShip(this.state.enemyField, ship)\n    });\n  }\n  handleClick(y, x) {\n    if (this.state.enemyField[y][x].shot) {\n      return\n    }\n    if (this.state.gameOver) {\n      return\n    }\n    this.setState(state => {\n      const newField = [...state.enemyField];\n      newField[y][x].shot = true;\n      newField[y][x].isShipVisible = true;\n      const newShips = [...state.enemyShips];\n      const newLogs = [...state.logs];\n      let gameOver = false;\n      if (newField[y][x].containsShip) {\n        const hittedShip = newShips.find(ship => (ship.id === newField[y][x].shipId));\n        hittedShip.hitpoints--;\n        if (hittedShip.hitpoints > 0) {\n          newLogs.push('Попадание!');\n        } else {\n          newLogs.push('Корабль уничтожен!');\n        }\n        if (newShips.every(ship => (ship.hitpoints === 0))) {\n          newLogs.push('Игра окончена.');\n          gameOver = true;\n        }\n      } else {\n        newLogs.push('Мимо!');\n      }\n      return {\n        enemyField: newField,\n        enemyShips: newShips,\n        gameOver: gameOver,\n        logs: newLogs,\n      }\n    })\n  }\n  render() {\n    return (\n      <div className=\"game\">\n        {/* <Field whose=\"player\" fieldMap={this.state.playerField} /> */}\n        <Field \n        whose=\"enemy\" \n        fieldMap={this.state.enemyField} \n        onClick={(y, x) => this.handleClick(y, x)}\n        />\n        <GameLog logs={this.state.logs} />\n      </div>\n    );\n  }\n}\n\nexport default Game;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}