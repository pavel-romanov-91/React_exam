{"ast":null,"code":"var _jsxFileName = \"I:\\\\react_exam\\\\src\\\\pages\\\\Battle\\\\Battle.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport Header from \"../../components/Header/Header\";\nimport BattleField from \"../../components/BattleField/BattleField\";\nimport StatusField from \"../../components/StatusField/StatusField\";\nimport Control from \"../../components/Contol/Control\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { gameOptions } from \"../../utils/game\";\nimport { useHistory } from \"react-router\";\nimport { setGame } from \"../../redux/actions/actionCreators\";\nimport ComputerBattleField from \"../../components/Computer/ComputerBattleField/ComputerBattleField\";\nimport { setPcSettings } from \"../../redux/actions/actionCreatorsPC\";\nimport Spinner from \"../../components/Spinner/Spinner\";\nimport ModalWindow from \"../../components/ModalWindow/ModalWindow\";\nimport s from \"./Battle.module.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Battle = () => {\n  _s();\n  const dispatch = useDispatch(); //вызываем хук для получения dispatch из store\n  const history = useHistory(); // для работы в роутером\n  const {\n    userName,\n    pcName\n  } = useSelector(state => state.auth); // вытягиваем данные из store\n  const {\n    ships\n  } = useSelector(state => state.game);\n  const {\n    isModal\n  } = useSelector(state => state.game.modal);\n\n  // генерирует расположение кораблей\n  const genShip = () => {\n    const ships = gameOptions.generateShips('user'); // для пользователя\n    const computerShips = gameOptions.generateShips('computer'); // для компьютера\n    //отправляем сгенерированные данные к store\n    ships && dispatch(setGame({\n      ships: ships,\n      shipCount: ships.length\n    }));\n    computerShips && dispatch(setPcSettings({\n      ships: computerShips,\n      shipCount: computerShips.length\n    }));\n    return {\n      ships,\n      computerShips\n    };\n  };\n  useEffect(() => {\n    // при рендере компонента, будет происходит генерация кораблей, если их нет в store\n    if (ships.length === 0) {\n      genShip();\n    }\n    // eslint-disable-next-line\n  }, []);\n\n  // если пользователей нет - редирект на auth component\n  if (!userName) {\n    history.push('/auth');\n  }\n\n  // заглушка если корабли не расстановлены\n  if (!ships.length) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: s.seaBattle__wrapper,\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      title: 'To Battle'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StatusField, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.battle,\n      children: [/*#__PURE__*/_jsxDEV(ComputerBattleField, {\n        nickname: `${pcName} - computer`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BattleField, {\n        nickname: `${userName} - you`,\n        isPc: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), isModal && /*#__PURE__*/_jsxDEV(ModalWindow, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.seaBattle__footer,\n      children: /*#__PURE__*/_jsxDEV(Control, {\n        value: 'End game',\n        target: 'exit'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(Battle, \"oHTXWrqooGN1DeOINJU3wHRL1xU=\", false, function () {\n  return [useDispatch, useHistory, useSelector, useSelector, useSelector];\n});\n_c = Battle;\nexport default Battle;\nvar _c;\n$RefreshReg$(_c, \"Battle\");","map":{"version":3,"names":["React","useEffect","Header","BattleField","StatusField","Control","useDispatch","useSelector","gameOptions","useHistory","setGame","ComputerBattleField","setPcSettings","Spinner","ModalWindow","s","jsxDEV","_jsxDEV","Battle","_s","dispatch","history","userName","pcName","state","auth","ships","game","isModal","modal","genShip","generateShips","computerShips","shipCount","length","push","fileName","_jsxFileName","lineNumber","columnNumber","className","seaBattle__wrapper","children","title","battle","nickname","isPc","seaBattle__footer","value","target","_c","$RefreshReg$"],"sources":["I:/react_exam/src/pages/Battle/Battle.js"],"sourcesContent":["import React, {useEffect} from \"react\";\nimport Header from \"../../components/Header/Header\";\nimport BattleField from \"../../components/BattleField/BattleField\";\nimport StatusField from \"../../components/StatusField/StatusField\";\nimport Control from \"../../components/Contol/Control\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {gameOptions} from \"../../utils/game\";\nimport {useHistory} from \"react-router\";\nimport {setGame} from \"../../redux/actions/actionCreators\";\nimport ComputerBattleField from \"../../components/Computer/ComputerBattleField/ComputerBattleField\";\nimport {setPcSettings} from \"../../redux/actions/actionCreatorsPC\";\nimport Spinner from \"../../components/Spinner/Spinner\";\nimport ModalWindow from \"../../components/ModalWindow/ModalWindow\";\nimport s from \"./Battle.module.scss\";\n\n\n\nconst Battle = () => {\n\n  const dispatch = useDispatch() //вызываем хук для получения dispatch из store\n  const history = useHistory() // для работы в роутером\n  const { userName, pcName } = useSelector( state => state.auth) // вытягиваем данные из store\n  const { ships }  = useSelector(state => state.game)\n  const { isModal } = useSelector( state => state.game.modal)\n\n// генерирует расположение кораблей\n  const genShip = () => {\n      const ships = gameOptions.generateShips('user') // для пользователя\n      const computerShips = gameOptions.generateShips('computer') // для компьютера\n      //отправляем сгенерированные данные к store\n      ships && dispatch( setGame({ships: ships, shipCount: ships.length}))\n      computerShips && dispatch( setPcSettings({ships: computerShips, shipCount: computerShips.length}))\n    return {\n      ships,\n      computerShips\n    }\n  }\n\n\n  useEffect(() => { // при рендере компонента, будет происходит генерация кораблей, если их нет в store\n    if (ships.length === 0) {\n        genShip()\n    }\n    // eslint-disable-next-line\n  }, [])\n\n  // если пользователей нет - редирект на auth component\n  if(!userName) {\n    history.push('/auth')\n  }\n\n  // заглушка если корабли не расстановлены\n  if(!ships.length) {\n    return <Spinner/>\n  }\n\n  return (\n    <div className={s.seaBattle__wrapper}>\n      <Header title={'To Battle'}/>\n      <StatusField/>\n      <div className={s.battle}>\n        <ComputerBattleField nickname={ `${pcName} - computer` }/>\n        <BattleField nickname={ `${userName} - you` } isPc/>\n        { isModal && <ModalWindow/> }\n      </div>\n      <div className={s.seaBattle__footer}>\n        <Control value={ 'End game' } target={'exit'}/>\n      </div>\n    </div>\n  )\n}\n\nexport default Battle"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}