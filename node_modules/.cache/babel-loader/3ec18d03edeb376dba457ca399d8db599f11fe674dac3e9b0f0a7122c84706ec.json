{"ast":null,"code":"var _jsxFileName = \"I:\\\\react_exam\\\\src\\\\components\\\\Computer\\\\ComputerCell\\\\ComputerCell.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setGameResult, setLostStatus } from \"../../../redux/actions/actionCreators\";\nimport { setShipOptions } from \"../../../redux/actions/actionCreatorsPC\";\nimport withField from \"../../../HOCS/withField\";\nimport cn from \"classnames\";\nimport s from \"../../Cell/Cell.module.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ComputerCell = ({\n  cellId\n}) => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    ships,\n    shipCount,\n    isShip: shipEx\n  } = useSelector(state => state.computer);\n  const isMiss = useSelector(state => {\n    const miss = state.computer.isMiss;\n    return cellId in miss;\n  });\n  const isHit = useSelector(state => {\n    const {\n      ships\n    } = state.computer;\n    const ship = ships.find(ship => ship.location.includes(cellId));\n    if (ship) {\n      const partOfShip = ship.location.indexOf(cellId);\n      return ship.hit[partOfShip];\n    }\n  });\n  const isDead = useSelector(state => {\n    const {\n      ships\n    } = state.computer;\n    const ship = ships.find(ship => ship.location.includes(cellId));\n    return ship && ship.dead;\n  });\n  const isShip = useSelector(state => {\n    const {\n      isShip,\n      isDead,\n      isHit\n    } = state.computer;\n    if (cellId in isHit) {\n      return false;\n    } else if (cellId in isDead) {\n      return false;\n    }\n    return isShip.includes(cellId);\n  });\n  useEffect(() => {\n    if (ships.length > 0) {\n      dispatch(setShipOptions(ships, shipEx)); //который бы определил является ли ячейка частью кораблика\n    }\n    // eslint-disable-next-line\n  }, []);\n  useEffect(() => {\n    if (shipCount === 0) {\n      dispatch(setLostStatus()); // установим для игрока lost status\n      dispatch(setGameResult('You lost!')); // сменим состояние header компонента при проигрыше игрока\n    }\n    // eslint-disable-next-line\n  }, [shipCount]);\n  return /*#__PURE__*/_jsxDEV(\"td\", {\n    className: cn({\n      [s.cell_miss]: isMiss\n    }, {\n      [s.cell_hit]: isHit\n    }, {\n      [s.cell_dead]: isDead\n    }, {\n      [s.cell_ship]: isShip\n    }),\n    \"data-id\": cellId\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(ComputerCell, \"BE/rb4wOBhLUJo8kDLHNJabGMCA=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n_c = ComputerCell;\nexport default _c3 = withField(_c2 = /*#__PURE__*/React.memo(ComputerCell));\n// export default React.memo(ComputerCell)\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ComputerCell\");\n$RefreshReg$(_c2, \"%default%$withField\");\n$RefreshReg$(_c3, \"%default%\");","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","setGameResult","setLostStatus","setShipOptions","withField","cn","s","jsxDEV","_jsxDEV","ComputerCell","cellId","_s","dispatch","ships","shipCount","isShip","shipEx","state","computer","isMiss","miss","isHit","ship","find","location","includes","partOfShip","indexOf","hit","isDead","dead","length","className","cell_miss","cell_hit","cell_dead","cell_ship","fileName","_jsxFileName","lineNumber","columnNumber","_c","_c3","_c2","memo","$RefreshReg$"],"sources":["I:/react_exam/src/components/Computer/ComputerCell/ComputerCell.js"],"sourcesContent":["import React, {useEffect} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {setGameResult, setLostStatus} from \"../../../redux/actions/actionCreators\";\nimport {setShipOptions} from \"../../../redux/actions/actionCreatorsPC\";\nimport withField from \"../../../HOCS/withField\";\nimport cn from \"classnames\";\nimport s from \"../../Cell/Cell.module.scss\";\n\n\nconst ComputerCell = ( { cellId }) => {\n\n  const dispatch = useDispatch()\n  const { ships, shipCount, isShip: shipEx } = useSelector(state => state.computer)\n\n  const isMiss = useSelector( state => {\n    const miss = state.computer.isMiss\n    return cellId in miss\n  })\n\n  const isHit = useSelector( state => {\n    const { ships } = state.computer\n    const ship = ships.find( ship => ship.location.includes(cellId))\n    if (ship) {\n      const partOfShip = ship.location.indexOf(cellId)\n      return ship.hit[partOfShip]\n    }\n  })\n\n  const isDead = useSelector( state => {\n    const { ships } = state.computer\n    const ship = ships.find( ship => ship.location.includes(cellId))\n    return ship && ship.dead\n  })\n\n  const isShip = useSelector( state => {\n    const {isShip, isDead, isHit} = state.computer\n    if(cellId in isHit) {\n      return false\n    } else if (cellId in isDead) {\n      return false\n    }\n\n    return isShip.includes(cellId)\n  })\n\n\n  useEffect(() => {\n    if(ships.length > 0) {\n      dispatch( setShipOptions(ships, shipEx) ) //который бы определил является ли ячейка частью кораблика\n    }\n    // eslint-disable-next-line\n  }, [])\n\n  useEffect( () => {\n    if(shipCount === 0) {\n      dispatch( setLostStatus() ) // установим для игрока lost status\n      dispatch(setGameResult('You lost!')) // сменим состояние header компонента при проигрыше игрока\n    }\n    // eslint-disable-next-line\n  }, [shipCount])\n\n\n  return (\n    <td\n      className={ cn(\n        { [s.cell_miss]: isMiss },\n        { [s.cell_hit]: isHit },\n        { [s.cell_dead]: isDead },\n        { [s.cell_ship]: isShip },\n      )}\n      data-id={cellId}\n    />\n  )\n}\n\nexport default withField( React.memo(ComputerCell) )\n// export default React.memo(ComputerCell)"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}